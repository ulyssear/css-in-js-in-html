(()=>{var W={parenthesis:0,bracket:0,brace:0,single_quote:0,double_quote:0,backtick:0},k={"(":"parenthesis-start",")":"parenthesis-end","[":"bracket-start","]":"bracket-end","{":"brace-start","}":"brace-end","'":"single_quote",'"':"double_quote","`":"backtick"},w={original:void 0,events:void 0,selectors:void 0,classes:void 0};function q(r){let l=Object.assign({},W),p=[],f="";for(let c=0;c<r.length;c++){let e=r[c],i=r[c+1];if(e+i==="//"){c+=r.slice(c).indexOf(`
`);continue}if(e+i==="/*"){c+=r.slice(c).indexOf("*/")+1;continue}let s={type:k[e]?.replace("-start","").replace("-end",""),variant:k[e]?k[e].split("-")[1]:void 0};s.variant==="start"&&(l[s.type]+=1),s.variant==="end"&&(l[s.type]-=1);let y=Object.values(l).reduce((n,a)=>n+a,0);if(["	","\r",`
`].includes(e)&&(e=" "),f+=e,y===0&&0<f.length&&(c===r.length-1||e===" ")){let n=Object.assign({},w);n.original=f.trim();let a=Object.assign({},W),o=[],g="";for(let b=0;b<n.original.length;b++){let t=n.original[b],h={type:k[t]?.replace("-start","").replace("-end",""),variant:k[t]?k[t].split("-")[1]:void 0};h.variant==="start"&&(a[h.type]+=1),h.variant==="end"&&(a[h.type]-=1);let _=Object.values(a).reduce((d,u)=>d+u,0);g+=t,_===0&&(t===":"||b===n.original.length-1)&&(o.push(g.trim()),0<o.length&&g.trim().startsWith("[@media(")&&g.trim().endsWith("]:")&&(n.media_query=g.trim().substring(8,g.trim().length-3)),g="")}if(1>o.length)continue;n.classes=function(t){t.startsWith("{")&&t.endsWith("}")&&(t=t.substring(1,t.length-1));let h=Object.assign({},W),_=[],d="";for(let u=0;u<t.length;u++){let m=t[u],j={type:k[m]?.replace("-start","").replace("-end",""),variant:k[m]?k[m].split("-")[1]:void 0};j.variant==="start"&&(h[j.type]+=1),j.variant==="end"&&(h[j.type]-=1);let S=Object.values(h).reduce((v,A)=>v+A,0);d+=m,S===0&&(m===" "||u===t.length-1)&&d.trim()!==""&&(_.push(d.trim()),d="")}return _}(o[o.length-1]),n.events=function(t){if(t&&!(t.startsWith("[")||t.endsWith("]")))return t.endsWith(":")&&(t=t.substring(0,t.length-1)),t.startsWith("{")&&t.endsWith("}")&&(t=t.substring(1,t.length-1)),t.split(",")}(n.media_query?void 0:o[o.length-3]),n.selectors=function b(t){if(!t||!(t.startsWith("[")&&(t.endsWith("]")||t.endsWith("]:")))||t.startsWith("[@media("))return;if(t=t.substring(1,t.length-(1+ +t.endsWith("]:"))),t.includes("@lookout")){let[u,m]=t.split("@lookout");return{tag:"lookout",before:b(u.trim()),after:b(m.trim())}}if([">","+","~"].includes(t[0]))return{tag:t[0],selectors:b(`[${t.substring(1).trim()}]`)};let h=Object.assign({},W),_=[],d="";for(let u=0;u<t.length;u++){let m=t[u],j={type:k[m]?.replace("-start","").replace("-end",""),variant:k[m]?k[m].split("-")[1]:void 0};j.variant==="start"&&(h[j.type]+=1),j.variant==="end"&&(h[j.type]-=1);let S=Object.values(h).reduce((v,A)=>v+A,0);if(d+=m,S===0&&(m===","||u===t.length-1)){let v=d.trim();v.startsWith(",")&&(v=v.substring(1,v.length)),v.endsWith(",")&&(v=v.substring(0,v.length-1)),_.push(v),d=""}}return _}(n.media_query?o[o.length-3]:o[o.length-2]),f="",p.push(n)}}return p}function O(r,l){let p=q(l);for(let f=0;f<p.length;f++){let{selectors:c,classes:e,events:i,media_query:s}=p[f],y=[];for(let n=0;n<e.length;n++){let a=e[n];if(a[0]==="["){O(r,a);continue}let o=a.lastIndexOf("-["),g=a.substring(0,o),b=a.substring(o+1,a.length);y.push({name:g,value:b.substring(1,b.length-1)})}r.className=r.className.replace(l,"").trim(),I(r,c,y,i,s)}}function I(r,l,p,f,c){if(c&&(c[0]!=="("&&(c=`(${c})`),!window.matchMedia(c).matches))return;let e=[r];if(l){e=[],typeof l=="object"&&!Array.isArray(l)&&(l=[l]);for(let i=0;i<l.length;i++){let s=l[i];if(typeof s=="object"){let{tag:n}=s;if(n==="lookout"){let a=[],o=[],{before:g,after:b}=s;for(let t=0;t<g.length;t++){let h=g[t],_=document.querySelectorAll(h);for(let d=0;d<_.length;d++){let u=_[d];u.matches(h)&&(e.push(u),a.push(u))}}for(let t=0;t<b.length;t++){let h=b[t],_=document.querySelectorAll(h);for(let d=0;d<_.length;d++){let u=_[d];u.matches(h)&&(e.push(u),o.push(u))}}}if(n===">"&&s.selectors){let{selectors:a}=s;for(let o=0;o<r.children.length;o++){let g=r.children[o];I(g,a,p,f,c)}}continue}let y=r.querySelectorAll(s);for(let n=0;n<y.length;n++)e.push(y[n])}}if(f){for(let i=0;i<f.length;i++){let s=f[i];for(let y=0;y<e.length;y++)e[y].addEventListener(s,()=>{for(let a=0;a<p.length;a++){let{name:o,value:g}=p[a];r.style.setProperty(o,g)}},!1)}return}for(let i=0;i<e.length;i++){let s=e[i];if(s)for(let y=0;y<p.length;y++){let{name:n,value:a}=p[y];s.style.setProperty(n,a)}}}function x(r,l=void 0){let p=`init : ${l?`(${l.type})`:""}`;console.time(p);let f=r.querySelectorAll("*:not(head, head *)[class]");for(let e=0;e<f.length;e++){let i=f[e];try{O(i,i.className)}catch(s){console.error(s)}}new MutationObserver(L).observe(r,{attributes:!0,attributeFilter:["class"],childList:!0,subtree:!0}),console.timeEnd(p),r.body.removeAttribute("aria-busy"),r.body.removeAttribute("hidden")}function L(r){console.time("init_observer");for(let l=0;l<r.length;l++){let{type:p,target:f,attributeName:c}=r[l];if(p==="attributes"&&c==="class"&&O(f,f.className),p==="childList"){let e=f.querySelectorAll("*:not(head, head *)[class]");for(let i=0;i<e.length;i++){let s=e[i];O(s,s.className)}}}console.timeEnd("init_observer")}var N={init:x,fromClassNameToGroups:q};window.CSS_IN_JS_IN_HTML=N;})();
//# sourceMappingURL=index.min.js.map
